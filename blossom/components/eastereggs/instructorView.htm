<!--
  ~ Copyright (C) 2012-2016 Project Delphinium - All Rights Reserved
  ~
  ~ This file is subject to the terms and conditions defined in
  ~ file 'https://github.com/ProjectDelphinium/delphinium/blob/master/EULA',
  ~ which is part of this source code package.
  ~
  ~ NOTICE:  All information contained herein is, and remains the property of Project Delphinium. The intellectual and technical concepts contained
  ~ herein are proprietary to Project Delphinium and may be covered by U.S. and Foreign Patents, patents in process, and are protected by trade secret or copyright law.
  ~ Dissemination of this information or reproduction of this material is strictly forbidden unless prior written permission is obtained
  ~ from Project Delphinium.
  ~
  ~ THE RECEIPT OR POSSESSION OF THIS SOURCE CODE AND/OR RELATED INFORMATION DOES NOT CONVEY OR IMPLY ANY RIGHTS
  ~ TO REPRODUCE, DISCLOSE OR DISTRIBUTE ITS CONTENTS, OR TO MANUFACTURE, USE, OR SELL ANYTHING THAT IT  MAY DESCRIBE, IN WHOLE OR IN PART.
  ~
  ~ Unauthorized copying of this file, via any medium is strictly prohibited
  ~ Non-commercial use only, you may not charge money for the software
  ~ You can modify personal copy of source-code but cannot distribute modifications
  ~ You may not distribute any version of this software, modified or otherwise
  -->

<div id="instructorWrap">
  <div id="eggsSettings">
    <a data-toggle="modal" data-keyboard="true" data-backdrop="true" onclick="eggsShowModal()"><i class="icon-cog"></i></a>
  </div>
  {% if (menu == 1) %}
    {% partial __SELF__~"::instructorDisplay" %}
  {% endif %} 
  <div class="control-popup modal fade" id="eggs-modalWindow" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          </div>
          <div class="modal-body">
            <!-- Tabs -->
            <ul class="nav nav-tabs">
              <li class="active"><a data-toggle="tab" href="#eggsConfigure">Configure</a></li>
              <li><a data-toggle="tab" href="#eggsInstruct">Instructions</a></li>
            </ul>
            <div class="tab-content" style="padding: 10px 0 10px 0;">
              <!-- Configure instance -->
              <div id="eggsConfigure" class="tab-pane fade in active" style="padding: 5px 0px;">
                <form role="form" id="updateForm" data-request="{{ __SELF__ }}::onSave" data-request-success="$el.hide();$('.confirm-container').removeClass('hide');completed(data);">
                  {{ eggsForm.update(eggsRecordId)|raw }}
                  {{ eggsForm.formRender()|raw }}
                  <div class="form-group">
                    <button class="btn btn-primary" type="submit" value="register" data-load-indicator="Saving Eggs..." >Update Component</button>
                    <button type="button" onclick="eggsHideModal()" class="btn btn-default" data-disposable="">Close</button>
                  </div>
                </form>
              </div>
              <!-- Instructions -->
              <div id="eggsInstruct" class="tab-pane fade in" style="padding: 0px 20px;">
                {{ eggsinstructions|raw }}
              </div>
            </div>
          </div>
        </div>
        <div style="clear:both; height:1.5em"></div>
      </div>
    </div>
  </div>
</div>

<style>
  /*override backend styles*/
  .modal-header {background:none !important;border-bottom:1px solid #e5e5e5 !important;}
  .modal-header .close{color:black !important;background:transparent !important;}
  .modal-body {padding-bottom: 10px;}
</style>

<script>
function eggsShowModal(){
  $("#eggs-modalWindow").on("shown.bs.modal", function () {}).modal('show');
}

function eggsHideModal(){
  $('#eggs-modalWindow').modal('hide');
}

function completed(data){
  eggsHideModal();
  //location.reload();
  history.go(0);
}
</script>