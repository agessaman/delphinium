<!-- You Got This Game partial -->

<div class="bkground"></div>
    <div class="page">
        <div class="title">
            <div id="you"></div>
            <div id="this"></div>
            <div id="got"></div>
            <div id="yep"></div>
            <div id="gobtn">Play Now</div>
        </div>
        
        <div class="gameplay">
            <div class="headbox">
                <div class="score">Score:</div>
                <div class="missd">Missed:</div>
                <div class="timr">Timer:</div>
            </div>

            <div class="questbox">Question:</div>
			<div class="valid"></div>
            <div class="answerbox">
                <div id="a0" class="makeDraggable answer">Answer 0</div>
                <div id="a1" class="makeDraggable answer">Answer 1</div>
                <div id="a2" class="makeDraggable answer">Answer 2</div>
                <div id="a3" class="makeDraggable answer">Answer 3</div>
                <div id="nextaro"></div>
            </div>
            <div id="star"></div>
            <div id="wrong"></div>
        </div>
    </div>
</div>
<!--script type="text/javascript" src="plugins/delphinium/poppies/assets/javascript/jquery.spritely.js"></script-->
<script>
/* To Do:
assets/javascript/ygt_game.js
	get game questions from db?
	
	updateScore & missed
	timer
	gameOver();
*/
var current=0;
var gameQuest=[];

function showIntro()
{
    $('gameplay').hide();
	/*
		animated title as js file ???
		click Play Now #gobtn
		todo: center animated title
	*/
	$('#you')
	   .animate({
		  left: 335, opacity: 1
		}, 300);

	$('#got')
		.delay(500)
		.animate({
			top:228, opacity: 1
		}, 500);

	$('#this')
		.delay(800)
		.animate({
			left:392, opacity: 1
		}, 300);	

	$('#yep')
		.delay(1000)
		.animate({
			top: 392, opacity: 1
		}, 300);

	$('#gobtn')
		.delay(1600)
		.animate({opacity: 1}, 400);
}

// begin
showIntro();
/*
    click Play Now animates title off
    play area onto screen
*/
$('#gobtn').on('click', function(){
    $('.title').animate({left: -1000, opacity: 0}, 500, function(){ $('.title').hide(); });
    $('.bkground').animate({opacity:0.2},800);
    $('.gameplay').show();
    showQuestion(current);
    //conclusion gameOver and play again?
});

/* http://spritely.net/ sprites */
$('#star').sprite({fps:6, no_of_frames:6}).active();
$('#star').hide();
function showStar() {
    $('#star').show();
   // $('#star').sprite({fps: 6, no_of_frames: 6, on_last_frame: function(obj) { obj.stop(true); } }).active();
    $('#star').css({'left':350,'top':120, opacity:1})
        .animate({ left: 200, top: 20, opacity: 0 }, 1000, function(){ //$('#star').destroy(); 
		});
}

$('#wrong').sprite({fps: 6, no_of_frames: 6}).active();
$('#wrong').hide();
function shoWrong() {
    $('#wrong').show();
/*   $('#wrong').sprite({fps: 6, no_of_frames: 6,
            on_last_frame: function(obj) { obj.stop(true); }
            }).active();
*/
    $('#wrong').css({'left':450,'top':150, opacity:1})
        .animate({ top: 20, opacity: 0 }, 1000, function(){ //$('#wrong').spStop(true); 
		});
}

$('#nextaro').sprite({fps: 6, no_of_frames: 4}).active();
$('#nextaro').hide();
function showNextaro() {
    $('#nextaro').show();
    
}
$('#nextaro').on('click', function(){
    $('#nextaro').hide();
	$('.valid').empty();
	// animate question OFF screen or fade
	current++;
	if(current==gameitems.length){ 
		current=0;
		//gameOver
	}
    showQuestion(current);//show next question
	$('.makeDraggable').show();// all answers
});

//animate onto screen from top?
function showQuestion(index) {
	$('.questbox').html(gameQuest[index][0].text);
	var answers= $.parseJSON(gameQuest[index][0].answers);
	var ansdiv='';
	//console.log(answers);
	// animate answers onto screen from bottom?
	for(var i=0; i<answers.length; i++){
		$('#a'+i).html(answers[i].text)
			.attr('weight', answers[i].weight);// or hide?
	}
}
// updateScore, gameOver, timer

/*
    http://www.elated.com/articles/drag-and-drop-with-jquery-your-essential-guide/
    http://api.jqueryui.com/draggable/
	http://getbootstrap.com/css/
*/
$('.makeDraggable').draggable({
    containment: '.page',
    snap: '.page',
    zIndex: 500,
    iframeFix: true,
    distance: 10,
	revert: true
});

$('.questbox').droppable({
    drop: handleDropEvent
});
function handleDropEvent( event, ui ) {
    var offsetXPos = parseInt( ui.offset.left );
    var offsetYPos = parseInt( ui.offset.top );
    console.log( event.target.id+" Offset: (" + offsetXPos + ", " + offsetYPos + ")");
    
    var id = ui.draggable.attr('weight');
    //console.log( 'dropped ID "' + id + '" was dropped onto me!' );
	//multiple answers points/weight = score: totalWeight=100 = done
    if(id == '100') {
        showStar();//play correct sprite
        //console.log("correct");
        $('.makeDraggable').hide();// all answers
        $('.valid').append($('#'+id).html());// show answer
        showNextaro();
    } else {
        
       shoWrong();//play wrong
    }
}


</script>