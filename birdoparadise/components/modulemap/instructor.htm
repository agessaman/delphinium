<!-- Instructor View with Settings cog -->
<div class="page">
	<div id="cog" data-toggle="modal" href="#content-configuration" style="position:absolute; top:10px; right:50px; z-index:950;">
		<a data-toggle="tooltip" title="Settings" data-placement="bottom"><i class="icon-cog"></i></a>
	</div>

	<div id="tabs">
		<ul id="tablist" role="tablist" class="nav nav-tabs">
			<!-- Insert new tabs -->
		</ul>
		<div class="scrollnav"><!-- scroll arrows -->
			<span class="arol"></span>
			<span class="aror"></span>
		</div>
		<div id="tabdy" class="tab-content">
			<!-- Insert tab body content -->
		</div>
	</div>
</div>

<!-- Configuration modal with Front End Form and Instructions in tabs -->
<div class="control-popup modal fade" id="content-configuration" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" style="width:800px; overflow-y: auto;">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Component Settings</h4>
            </div>
            <div class="modal-body">
                <!-- Tabs -->
                <ul class="nav nav-tabs">
                  <li><a data-toggle="tab" href="#configure">Configure</a></li>
                  <li class="active"><a data-toggle="tab" href="#instruct">Instructions</a></li>
                </ul>
                <div class="tab-content">
                <!-- Configure instance -->
                  <div id="configure" class="tab-pane fade in" style="padding: 5px 0px;">
                    <form role="form" id="updateForm"
                      data-request="{{ __SELF__ }}::onUpdate"
                      data-request-success="$el.hide();completed(data);">
                        {{ form.formRender()|raw }}
                      <div class="form-group">
                         <button class="btn btn-primary btn-block btn-md" type="submit" value="register">Update Component</button>
                      </div>
                    </form>
                  </div>
                <!-- Instructions ACTIVE -->
                  <div id="instruct" class="tab-pane fade in active" style="padding: 0px 20px;">
                      {{ instructions|raw }}
                  </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal: when module is clicked show items in module -->
<div class="control-popup modal fade" id="itemdetails" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 id="detailed-title" class="modal-title">Item Details</h4>
            </div>
            <div id="detailed-body" class="modal-body">
                <p>This displays details of module</p>
            </div>
        </div>
    </div>
</div>

<script>
//(function() {
    
	var configVal=[config.name];
	var fieldIDs=['Form-field-Modulemap-name'];
	
    /* set id,course,copy in the POST they are not editable
        Add hidden input fields so they will transfer to onUpdate
        fields.yaml is set to hidden: true so they do not appear at all
    */
    $('#Form-outsideTabs').append('<input type="hidden" name="Modulemap[id]" value="'+config.id+'" /> ');
    $('#Form-outsideTabs').append('<input type="hidden" name="Modulemap[course_id]" value="'+config.course_id+'" /> ');
    $('#Form-outsideTabs').append('<input type="hidden" name="Modulemap[copy_id]" value="'+config.copy_id+'" /> ');
    
    //fill the form with current configuration
    for(var f=0; f<configVal.length; f++) {
       $('#'+fieldIDs[f]).val(configVal[f]);
    }
    // wont need form update configure set instruct active
	function completed(data)
	{
        /* updated record is returned */
        location.reload();
	}
	//console.log('instance:'+config.id,config.name,config.course_id,config.copy_id);
    //  DONT NEED TO EDIT FORM - REMOVE? ONLY Instructions needed! which is part of FORM partial?
    /*
        Bird of Paradise: instructor view
    */
	
//})();
</script>
